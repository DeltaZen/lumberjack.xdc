/*
Charm
*/
var _createClass=function(){function l(b,c){for(var a=0;a<c.length;a++){var f=c[a];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(b,c,a){c&&l(b.prototype,c);a&&l(b,a);return b}}();function _toConsumableArray(l){if(Array.isArray(l)){for(var b=0,c=Array(l.length);b<l.length;b++)c[b]=l[b];return c}return Array.from(l)}
function _classCallCheck(l,b){if(!(l instanceof b))throw new TypeError("Cannot call a class as a function");}
window.Charm=function(){function l(){var b=this,c=0>=arguments.length||void 0===arguments[0]?PIXI:arguments[0];_classCallCheck(this,l);if(void 0===c)throw Error("Please assign a rendering engine in the constructor before using charm.js");this.renderer="";c.ParticleContainer&&c.Sprite&&(this.renderer="pixi");this.globalTweens=[];this.easingFormulas={linear:function(a){return a},smoothstep:function(a){return a*a*(3-2*a)},smoothstepSquared:function(a){return Math.pow(a*a*(3-2*a),2)},smoothstepCubed:function(a){return Math.pow(a*
a*(3-2*a),3)},acceleration:function(a){return a*a},accelerationCubed:function(a){return Math.pow(a*a,3)},deceleration:function(a){return 1-Math.pow(1-a,2)},decelerationCubed:function(a){return 1-Math.pow(1-a,3)},sine:function(a){return Math.sin(a*Math.PI/2)},sineSquared:function(a){return Math.pow(Math.sin(a*Math.PI/2),2)},sineCubed:function(a){return Math.pow(Math.sin(a*Math.PI/2),2)},inverseSine:function(a){return 1-Math.sin((1-a)*Math.PI/2)},inverseSineSquared:function(a){return 1-Math.pow(Math.sin((1-
a)*Math.PI/2),2)},inverseSineCubed:function(a){return 1-Math.pow(Math.sin((1-a)*Math.PI/2),3)},spline:function(a,b,c,g,k){return.5*(2*c+(-b+g)*a+(2*b-5*c+4*g-k)*a*a+(-b+3*c-3*g+k)*a*a*a)},cubicBezier:function(a,b,c,g,k){var d=a*a;return b+(3*-b+a*(3*b-b*a))*a+(3*c+a*(-6*c+3*c*a))*a+(3*g-3*g*a)*d+k*d*a}};this._addScaleProperties=function(a){"pixi"===b.renderer&&(!a.scaleX&&a.scale.x&&Object.defineProperty(a,"scaleX",{get:function(){return a.scale.x},set:function(b){a.scale.x=b}}),!a.scaleY&&a.scale.y&&
Object.defineProperty(a,"scaleY",{get:function(){return a.scale.y},set:function(b){a.scale.y=b}}))}}_createClass(l,[{key:"tweenProperty",value:function(b,c,a,f,h){var g=5>=arguments.length||void 0===arguments[5]?"smoothstep":arguments[5],k=this,d=6>=arguments.length||void 0===arguments[6]?!1:arguments[6],m=7>=arguments.length||void 0===arguments[7]?0:arguments[7],e={},p=g.split(" ");"bounce"===p[0]&&(e.startMagnitude=parseInt(p[1]),e.endMagnitude=parseInt(p[2]));e.start=function(a,b){e.startValue=
JSON.parse(JSON.stringify(a));e.endValue=JSON.parse(JSON.stringify(b));e.playing=!0;e.totalFrames=h;e.frameCounter=0;k.globalTweens.push(e)};e.start(a,f);e.update=function(){var a;e.playing&&(e.frameCounter<e.totalFrames?(a=e.frameCounter/e.totalFrames,a="bounce"!==p[0]?k.easingFormulas[g](a):k.easingFormulas.spline(a,e.startMagnitude,0,1,e.endMagnitude),b[c]=e.endValue*a+e.startValue*(1-a),e.frameCounter+=1):(b[c]=e.endValue,e.end()))};e.end=function(){e.playing=!1;if(e.onComplete)e.onComplete();
k.globalTweens.splice(k.globalTweens.indexOf(e),1);d&&k.wait(m).then(function(){e.start(e.endValue,e.startValue)})};e.play=function(){return e.playing=!0};e.pause=function(){return e.playing=!1};return e}},{key:"makeTween",value:function(b){var c=this,a={tweens:[]};b.forEach(function(b){b=c.tweenProperty.apply(c,_toConsumableArray(b));a.tweens.push(b)});var f=0;a.completed=function(){f+=1;if(f===a.tweens.length){if(a.onComplete)a.onComplete();f=0}};a.tweens.forEach(function(b){b.onComplete=function(){return a.completed()}});
a.pause=function(){a.tweens.forEach(function(a){a.playing=!1})};a.play=function(){a.tweens.forEach(function(a){a.playing=!0})};return a}},{key:"fadeOut",value:function(b){return this.tweenProperty(b,"alpha",b.alpha,0,1>=arguments.length||void 0===arguments[1]?60:arguments[1],"sine")}},{key:"fadeIn",value:function(b){return this.tweenProperty(b,"alpha",b.alpha,1,1>=arguments.length||void 0===arguments[1]?60:arguments[1],"sine")}},{key:"pulse",value:function(b){return this.tweenProperty(b,"alpha",b.alpha,
2>=arguments.length||void 0===arguments[2]?0:arguments[2],1>=arguments.length||void 0===arguments[1]?60:arguments[1],"smoothstep",!0)}},{key:"slide",value:function(b,c,a){var f=3>=arguments.length||void 0===arguments[3]?60:arguments[3],h=4>=arguments.length||void 0===arguments[4]?"smoothstep":arguments[4],g=5>=arguments.length||void 0===arguments[5]?!1:arguments[5],k=6>=arguments.length||void 0===arguments[6]?0:arguments[6];return this.makeTween([[b,"x",b.x,c,f,h,g,k],[b,"y",b.y,a,f,h,g,k]])}},{key:"rotate",
value:function(b,c){return this.tweenProperty(b,"rotation",b.rotation,c,2>=arguments.length||void 0===arguments[2]?60:arguments[2],3>=arguments.length||void 0===arguments[3]?"smoothstep":arguments[3],4>=arguments.length||void 0===arguments[4]?!1:arguments[4],5>=arguments.length||void 0===arguments[5]?0:arguments[5])}},{key:"breathe",value:function(b){var c=1>=arguments.length||void 0===arguments[1]?.8:arguments[1],a=2>=arguments.length||void 0===arguments[2]?.8:arguments[2],f=3>=arguments.length||
void 0===arguments[3]?60:arguments[3],h=4>=arguments.length||void 0===arguments[4]?!0:arguments[4],g=5>=arguments.length||void 0===arguments[5]?0:arguments[5];this._addScaleProperties(b);return this.makeTween([[b,"scaleX",b.scaleX,c,f,"smoothstepSquared",h,g],[b,"scaleY",b.scaleY,a,f,"smoothstepSquared",h,g]])}},{key:"scale",value:function(b){var c=1>=arguments.length||void 0===arguments[1]?.5:arguments[1],a=2>=arguments.length||void 0===arguments[2]?.5:arguments[2],f=3>=arguments.length||void 0===
arguments[3]?60:arguments[3];this._addScaleProperties(b);return this.makeTween([[b,"scaleX",b.scaleX,c,f,"smoothstep",!1],[b,"scaleY",b.scaleY,a,f,"smoothstep",!1]])}},{key:"strobe",value:function(b){var c=1>=arguments.length||void 0===arguments[1]?1.3:arguments[1],a=4>=arguments.length||void 0===arguments[4]?10:arguments[4],f=5>=arguments.length||void 0===arguments[5]?!0:arguments[5],h=6>=arguments.length||void 0===arguments[6]?0:arguments[6],g="bounce "+(2>=arguments.length||void 0===arguments[2]?
10:arguments[2])+" "+(3>=arguments.length||void 0===arguments[3]?20:arguments[3]);this._addScaleProperties(b);return this.makeTween([[b,"scaleX",b.scaleX,c,a,g,f,h],[b,"scaleY",b.scaleY,c,a,g,f,h]])}},{key:"wobble",value:function(b){var c=1>=arguments.length||void 0===arguments[1]?1.2:arguments[1],a=2>=arguments.length||void 0===arguments[2]?1.2:arguments[2],f=3>=arguments.length||void 0===arguments[3]?10:arguments[3],h=8>=arguments.length||void 0===arguments[8]?.98:arguments[8],g=this,k=9>=arguments.length||
void 0===arguments[9]?!0:arguments[9],d=10>=arguments.length||void 0===arguments[10]?0:arguments[10],m="bounce "+(4>=arguments.length||void 0===arguments[4]?10:arguments[4])+" "+(5>=arguments.length||void 0===arguments[5]?10:arguments[5]),e="bounce "+(6>=arguments.length||void 0===arguments[6]?-10:arguments[6])+" "+(7>=arguments.length||void 0===arguments[7]?-10:arguments[7]);this._addScaleProperties(b);c=this.makeTween([[b,"scaleX",b.scaleX,c,f,m,k,d],[b,"scaleY",b.scaleY,a,f,e,k,d]]);c.tweens.forEach(function(a){a.onComplete=
function(){1<a.endValue&&(a.endValue*=h,1>=a.endValue&&(a.endValue=1,g.removeTween(a)))}});return c}},{key:"followCurve",value:function(b,c,a){var f=3>=arguments.length||void 0===arguments[3]?"smoothstep":arguments[3],h=this,g=4>=arguments.length||void 0===arguments[4]?!1:arguments[4],k=5>=arguments.length||void 0===arguments[5]?0:arguments[5],d={},m=f.split(" ");"bounce"===m[0]&&(d.startMagnitude=parseInt(m[1]),d.endMagnitude=parseInt(m[2]));d.start=function(b){d.playing=!0;d.totalFrames=a;d.frameCounter=
0;d.pointsArray=JSON.parse(JSON.stringify(b));h.globalTweens.push(d)};d.start(c);d.update=function(){var a,c=d.pointsArray;d.playing&&(d.frameCounter<d.totalFrames?(a=d.frameCounter/d.totalFrames,a="bounce"!==m[0]?h.easingFormulas[f](a):h.easingFormulas.spline(a,d.startMagnitude,0,1,d.endMagnitude),b.x=h.easingFormulas.cubicBezier(a,c[0][0],c[1][0],c[2][0],c[3][0]),b.y=h.easingFormulas.cubicBezier(a,c[0][1],c[1][1],c[2][1],c[3][1]),d.frameCounter+=1):d.end())};d.end=function(){d.playing=!1;if(d.onComplete)d.onComplete();
h.globalTweens.splice(h.globalTweens.indexOf(d),1);g&&h.wait(k).then(function(){d.pointsArray=d.pointsArray.reverse();d.start(d.pointsArray)})};d.pause=function(){d.playing=!1};d.play=function(){d.playing=!0};return d}},{key:"walkPath",value:function(b,c){var a=2>=arguments.length||void 0===arguments[2]?300:arguments[2],f=3>=arguments.length||void 0===arguments[3]?"smoothstep":arguments[3],h=4>=arguments.length||void 0===arguments[4]?!1:arguments[4],g=this,k=5>=arguments.length||void 0===arguments[5]?
!1:arguments[5],d=6>=arguments.length||void 0===arguments[6]?0:arguments[6],m=JSON.parse(JSON.stringify(c)),e=a/m.length;return function n(a){var c=g.makeTween([[b,"x",m[a][0],m[a+1][0],e,f],[b,"y",m[a][1],m[a+1][1],e,f]]);c.onComplete=function(){a+=1;a<m.length-1?g.wait(d).then(function(){c=n(a)}):h&&(k&&m.reverse(),g.wait(d).then(function(){a=0;b.x=m[0][0];b.y=m[0][1];c=n(a)}))};return c}(0)}},{key:"walkCurve",value:function(b,c){var a=3>=arguments.length||void 0===arguments[3]?"smoothstep":arguments[3],
f=4>=arguments.length||void 0===arguments[4]?!1:arguments[4],h=this,g=5>=arguments.length||void 0===arguments[5]?!1:arguments[5],k=6>=arguments.length||void 0===arguments[6]?0:arguments[6],d=(2>=arguments.length||void 0===arguments[2]?300:arguments[2])/c.length;return function e(l){var n=h.followCurve(b,c[l],d,a);n.onComplete=function(){l+=1;l<c.length?h.wait(k).then(function(){n=e(l)}):f&&(g&&(c.reverse(),c.forEach(function(a){return a.reverse()})),h.wait(k).then(function(){l=0;b.x=c[0][0];b.y=c[0][1];
n=e(l)}))};return n}(0)}},{key:"wait",value:function(){var b=0>=arguments.length||void 0===arguments[0]?0:arguments[0];return new Promise(function(c,a){setTimeout(c,b)})}},{key:"removeTween",value:function(b){var c=this;b.tweens?(b.pause(),b.tweens.forEach(function(a){c.globalTweens.splice(c.globalTweens.indexOf(a),1)})):(b.pause(),this.globalTweens.splice(this.globalTweens.indexOf(b),1))}},{key:"update",value:function(){if(0<this.globalTweens.length)for(var b=this.globalTweens.length-1;0<=b;b--){var c=
this.globalTweens[b];c&&c.update()}}}]);return l}();
